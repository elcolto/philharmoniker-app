(function(a){var h;try{h="string"==typeof a("body").css("background-position-x")}catch(l){h=!1}a._spritely={animate:function(b){var d=a(b.el),c=d.attr("id");if(!a._spritely.instances[c])return this;b=a.extend(b,a._spritely.instances[c]||{});b.play_frames&&!a._spritely.instances[c].remaining_frames&&(a._spritely.instances[c].remaining_frames=b.play_frames+1);if("sprite"==b.type&&b.fps){var f,e=function(d){var e=b.width;if(!f){f=[];for(var g=total=0;g<b.no_of_frames;g++)f[f.length]=0-total,total+=e}if(0==
a._spritely.instances[c].current_frame){if(b.on_first_frame)b.on_first_frame(d)}else if(a._spritely.instances[c].current_frame==f.length-1&&b.on_last_frame)b.on_last_frame(d);if(b.on_frame&&b.on_frame[a._spritely.instances[c].current_frame])b.on_frame[a._spritely.instances[c].current_frame](d);a._spritely.instances[c].current_frame=!0==b.rewind?0>=a._spritely.instances[c].current_frame?f.length-1:a._spritely.instances[c].current_frame-1:a._spritely.instances[c].current_frame>=f.length-1?0:a._spritely.instances[c].current_frame+
1;e=a._spritely.getBgY(d);d.css("background-position",f[a._spritely.instances[c].current_frame]+"px "+e);if(b.bounce&&0<b.bounce[0]&&0<b.bounce[1]){var e=b.bounce[0],g=b.bounce[1],h=b.bounce[2];d.animate({top:"+="+e+"px",left:"-="+g+"px"},h).animate({top:"-="+e+"px",left:"+="+g+"px"},h)}};if(a._spritely.instances[c].remaining_frames&&0<a._spritely.instances[c].remaining_frames){a._spritely.instances[c].remaining_frames--;if(0==a._spritely.instances[c].remaining_frames)return a._spritely.instances[c].remaining_frames=
-1,delete a._spritely.instances[c].remaining_frames,this;e(d)}else-1!=a._spritely.instances[c].remaining_frames&&e(d)}else if("pan"==b.type&&!a._spritely.instances[c]._stopped){e=b.speed||1;switch(b.dir){case "up":e*=-1;case "down":a._spritely.instances[c].l||(a._spritely.instances[c].l=a._spritely.getBgX(d).replace("px",""));a._spritely.instances[c].t=a._spritely.instances[c].t+e||0;b.img_height&&(a._spritely.instances[c].t%=b.img_height);break;case "left":e*=-1;case "right":a._spritely.instances[c].t||
(a._spritely.instances[c].t=a._spritely.getBgY(d).replace("px","")),a._spritely.instances[c].l=a._spritely.instances[c].l+e||0,b.img_width&&(a._spritely.instances[c].l%=b.img_width)}var e=a._spritely.instances[c].l.toString(),e=-1==e.indexOf("%")?e+"px ":e+" ",g=a._spritely.instances[c].t.toString(),g=-1==g.indexOf("%")?g+"px ":g+" ";a(d).css("background-position",e+g)}a._spritely.instances[c].options=b;a._spritely.instances[c].timeout=window.setTimeout(function(){a._spritely.animate(b)},parseInt(1E3/
b.fps))},randomIntBetween:function(a,d){return parseInt(rand_no=Math.floor((d-(a-1))*Math.random())+a)},getBgUseXY:h,getBgY:function(b){return a._spritely.getBgUseXY?a(b).css("background-position-y")||"0":(a(b).css("background-position")||" ").split(" ")[1]},getBgX:function(b){return a._spritely.getBgUseXY?a(b).css("background-position-x")||"0":(a(b).css("background-position")||" ").split(" ")[0]},get_rel_pos:function(a,d){var c=a;if(0>a)for(;0>c;)c+=d;else for(;c>d;)c-=d;return c},_spStrip:function(a,
d){for(;a.length;){var c,f,e=!1,g=!1;for(c=0;c<d.length;c++){var h=a.slice(0,1);f=a.slice(1);-1<d.indexOf(h)?a=f:e=!0}for(c=0;c<d.length;c++)h=a.slice(-1),f=a.slice(0,-1),-1<d.indexOf(h)?a=f:g=!0;if(e&&g)return a}return""}};a.fn.extend({spritely:function(b){var d=a(this),c=d.attr("id"),f=new Image,e=a._spritely._spStrip(d.css("background-image"),'url("); ');b=a.extend({type:"sprite",do_once:!1,width:null,height:null,img_width:0,img_height:0,fps:12,no_of_frames:2,stop_after:null},b||{});f.onload=function(){b.img_width=
f.width;b.img_height=f.height};f.src=e;b.img=f;a._spritely.instances||(a._spritely.instances={});a._spritely.instances[c]||(a._spritely.instances[c]=b.start_at_frame?{current_frame:b.start_at_frame-1}:{current_frame:-1});a._spritely.instances[c].type=b.type;a._spritely.instances[c].depth=b.depth;b.el=this;b.width=b.width||d.width()||100;b.height=b.height||d.height()||100;b.do_once?setTimeout(function(){a._spritely.animate(b)},0):setTimeout(function(){a._spritely.animate(b)},parseInt(1E3/b.fps));return this},
sprite:function(b){b=a.extend({type:"sprite",bounce:[0,0,1E3]},b||{});return a(this).spritely(b)},pan:function(b){b=a.extend({type:"pan",dir:"left",continuous:!0,speed:1},b||{});return a(this).spritely(b)},flyToTap:function(b){b=a.extend({el_to_move:null,type:"moveToTap",ms:1E3,do_once:!0},b||{});b.el_to_move&&a(b.el_to_move).active();a._spritely.activeSprite&&(window.Touch?a(this)[0].ontouchstart=function(b){var c=a._spritely.activeSprite,f=b.touches[0];b=f.pageY-c.height()/2;f=f.pageX-c.width()/
2;c.animate({top:b+"px",left:f+"px"},1E3)}:a(this).click(function(b){var c=a._spritely.activeSprite;a(c).stop(!0);var f=c.width(),e=c.height();c.animate({top:b.pageY-e/2+"px",left:b.pageX-f/2+"px"},1E3)}));return this},isDraggable:function(b){if(!a(this).draggable)return this;b=a.extend({type:"isDraggable",start:null,stop:null,drag:null},b||{});var d=a(this).attr("id");if(!a._spritely.instances[d])return this;a._spritely.instances[d].isDraggableOptions=b;a(this).draggable({start:function(){var b=
a(this).attr("id");a._spritely.instances[b].stop_random=!0;a(this).stop(!0);a._spritely.instances[b].isDraggableOptions.start&&a._spritely.instances[b].isDraggableOptions.start(this)},drag:b.drag,stop:function(){var b=a(this).attr("id");a._spritely.instances[b].stop_random=!1;a._spritely.instances[b].isDraggableOptions.stop&&a._spritely.instances[b].isDraggableOptions.stop(this)}});return this},active:function(){a._spritely.activeSprite=this;return this},activeOnClick:function(){var b=a(this);window.Touch?
b[0].ontouchstart=function(d){a._spritely.activeSprite=b}:b.click(function(d){a._spritely.activeSprite=b});return this},spRandom:function(b){b=a.extend({top:50,left:50,right:290,bottom:320,speed:4E3,pause:0},b||{});var d=a(this).attr("id");if(!a._spritely.instances[d])return this;if(!a._spritely.instances[d].stop_random){var c=a._spritely.randomIntBetween,f=c(b.top,b.bottom),c=c(b.left,b.right);a("#"+d).animate({top:f+"px",left:c+"px"},b.speed)}window.setTimeout(function(){a("#"+d).spRandom(b)},b.speed+
b.pause);return this},makeAbsolute:function(){return this.each(function(){var b=a(this),d=b.position();b.css({position:"absolute",marginLeft:0,marginTop:0,top:d.top,left:d.left}).remove().appendTo("body")})},spSet:function(b,d){var c=a(this).attr("id");a._spritely.instances[c][b]=d;return this},spGet:function(b,d){var c=a(this).attr("id");return a._spritely.instances[c][b]},spStop:function(b){a(this).each(function(){var d=a(this).attr("id");a._spritely.instances[d].options.fps&&(a._spritely.instances[d]._last_fps=
a._spritely.instances[d].options.fps);a._spritely.instances[d]._stopped=!0;a._spritely.instances[d]._stopped_f1=b;"sprite"==a._spritely.instances[d].type&&a(this).spSet("fps",0);b&&(d=a._spritely.getBgY(a(this)),a(this).css("background-position","0 "+d))});return this},spStart:function(){a(this).each(function(){var b=a(this).attr("id"),d=a._spritely.instances[b]._last_fps||12;"sprite"==a._spritely.instances[b].type&&a(this).spSet("fps",d);a._spritely.instances[b]._stopped=!1});return this},spToggle:function(){var b=
a(this).attr("id"),d=a._spritely.instances[b]._stopped_f1||!1;a._spritely.instances[b]._stopped?a(this).spStart():a(this).spStop(d);return this},fps:function(b){a(this).each(function(){a(this).spSet("fps",b)});return this},goToFrame:function(b){var d=a(this).attr("id");a._spritely.instances&&a._spritely.instances[d]&&(a._spritely.instances[d].current_frame=b-1);return this},spSpeed:function(b){a(this).each(function(){a(this).spSet("speed",b)});return this},spRelSpeed:function(b){a(this).each(function(){var d=
a(this).spGet("depth")/100;a(this).spSet("speed",b*d)});return this},spChangeDir:function(b){a(this).each(function(){a(this).spSet("dir",b)});return this},spState:function(b){a(this).each(function(){var d=(b-1)*a(this).height()+"px",d=a._spritely.getBgX(a(this))+" -"+d;a(this).css("background-position",d)});return this},lockTo:function(b,d){a(this).each(function(){var c=a(this).attr("id");if(!a._spritely.instances[c])return this;a._spritely.instances[c].locked_el=a(this);a._spritely.instances[c].lock_to=
a(b);a._spritely.instances[c].lock_to_options=d;a._spritely.instances[c].interval=window.setInterval(function(){if(a._spritely.instances[c].lock_to){var b=a._spritely.instances[c].locked_el,d=a._spritely.instances[c].lock_to,g=a._spritely.instances[c].lock_to_options,h=g.bg_img_width;d.height();var k=a._spritely.getBgY(d),d=a._spritely.getBgX(d),d=parseInt(d)+parseInt(g.left),g=parseInt(k)+parseInt(g.top),d=a._spritely.get_rel_pos(d,h);a(b).css({top:g+"px",left:d+"px"})}},d.interval||20)});return this},
destroy:function(){a(this);var b=a(this).attr("id");a._spritely.instances[b]&&a._spritely.instances[b].timeout&&window.clearTimeout(a._spritely.instances[b].timeout);a._spritely.instances[b]&&a._spritely.instances[b].interval&&window.clearInterval(a._spritely.instances[b].interval);delete a._spritely.instances[b];return this}})})(jQuery);try{document.execCommand("BackgroundImageCache",!1,!0)}catch(err){};
